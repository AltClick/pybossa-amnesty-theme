{% extends "/base.html" %}
{% set active_page = "create" %}
{% set active_link  = "applications" %}
{% import "account/_helpers.html" as helper %}

{% block content %}
{% from "_formhelpers.html" import render_field %}
<div id="app-form" class="row"> 
    <div class="span3">
        {{ helper.render_account_local_nav(current_user, active_link) }}
    </div>
    <div class="span9">
        <h1><strong>{{ _('Application') }}</strong>: {{ _('Create a new application') }}</h1>
        <form class="form-horizontal" method="post" action="{{ url_for('app.new')}}" enctype="multipart/form-data"}}>
        {{ form.hidden_tag() }}
        <fieldset>
            {{ render_field(form.name, class_="span4", placeholder= _('The name of the application')) }}
            {{ render_field(form.short_name, class_="span4", placeholder=_('Short name or slug for the application')) }}
            {{ render_field(form.long_description, class_="span4", placeholder=_('Explain the application (you can use Markdown!)')) }}
            {{ render_field(form.description, class_="span4", placeholder=_('Give some details about the application')) }}
            <div class="form-actions">
                <input type="submit" value={{_('Create the application')}} class="btn btn-primary" />
                <a href="{{url_for('account.profile', name=current_user.name)}}" class="btn">{{_('Cancel')}}</a>
            </div>
        </fieldset>
    </form>
    </div>
</div>
<script>
    $("span[rel='tooltip']").tooltip();
    $("i[rel='tooltip']").tooltip();
</script>
<script type="text/javascript">
    var name = $('#name');
    var short_name = $('#short_name');

    name.on('keyup', function(){
        short_name.val(makeUrlFromName(name.val()));
    });

    function makeUrlFromName(name){
        return name.toLowerCase().trim().replace(/(\W+)/g, "-");
    }
</script>

{% endblock %}
